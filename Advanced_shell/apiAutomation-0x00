#!/bin/bash
# Task 0: API Request Automation
# Fetch Pikachu data from PokÃ©mon API and save to data.json
# Log errors to errors.txt

API_URL="https://pokeapi.co/api/v2/pokemon/pikachu"
OUTPUT="data.json"
ERROR_LOG="errors.txt"

curl -s -w "%{http_code}" "$API_URL" -o "$OUTPUT.tmp" > "$OUTPUT.code"
CODE=$(cat "$OUTPUT.code")
if [ "$CODE" -eq 200 ]; then
    mv "$OUTPUT.tmp" "$OUTPUT"
    rm "$OUTPUT.code"
else
    echo "Error: HTTP $CODE" >> "$ERROR_LOG"
    cat "$OUTPUT.tmp" >> "$ERROR_LOG"
    rm "$OUTPUT.tmp" "$OUTPUT.code"
fi
